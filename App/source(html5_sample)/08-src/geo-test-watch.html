<!DOCTYPE html>
<html><head><meta charset="utf-8">
<meta name="viewport" content="width=320">
</head><body>
<div id="msg"></div>
<script type="text/javascript">
  window.onload = function() {
    // geolocation に対応しているかチェック
    if (navigator.geolocation == undefined) {
      alert("位置情報が利用できません。"); return;
    }
    // 監視を開始する
    navigator.geolocation.watchPosition(
      successCallback, errorCallback);
  };
  function successCallback(position) {
    var lat = position.coords.latitude;
    var lng = position.coords.longitude;
    var msg = document.getElementById("msg");
    msg.innerHTML = 
      "<h1>現在地を更新</h1>" +
      "<p>lat=" + lat + "</p>" +
      "<p>lng=" + lng + "</p>" +
      "<p>now=" + (new Date()).toString() + "</p>";
  }
  // 失敗したとき
  function errorCallback(err) {
      alert("失敗("+err.code+")");
  }
</script>
</body></html>

